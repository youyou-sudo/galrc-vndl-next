generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

type FilesiddatasFields {
  bgm   String[]
  steam String[]
  vndb  String[]
  ymgal String[]
}

type VndbdatasReleases {
  l_digiket String?
  l_dlsite  String
  l_egs     String?
  l_steam   String?
  lang      String
  latin     String?
  mtl       String
  released  String?
  rid       String
  rtype     String
  title     String?
}

type VndbdatasTitles {
  lang     String
  latin    String?
  official String
  title    String
}

model duptimes {
  id                String             @id @default(auto()) @map("_id") @db.ObjectId
  jsonorl           String
  name              String
  state             Boolean            @default(false)
  Statusdescription String?
  timeVersion       String
  type              String
  updatetime        DateTime           @default(now()) @db.Date
  filess            filesiddatas[]
  vndb              vndbdatas[]
  tags              tags[]
  tags_vndatas      tags_vndatas[]
  meilisearch_id    String[]           @db.ObjectId
  relationalIndex   meilisearchdatas[] @relation(fields: [meilisearch_id], references: [id])

  @@index([name], map: "name_1")
}

model meilisearchdatas {
  id                String     @id @default(auto()) @map("_id") @db.ObjectId
  host              String?
  indexName         String?    @unique
  masterKey         String?
  adminKey          String?
  searchKey         String?
  type              String
  primaryKey        String? // 主键
  Status            String?
  Statusdescription String?
  duptimes_id       String[]   @db.ObjectId
  relatedDataTables duptimes[] @relation(fields: [duptimes_id], references: [id])

  @@index([host], map: "host_1")
}

model filesiddatas {
  id        String             @id @default(auto()) @map("_id") @db.ObjectId
  cloudName String?
  cloud_id  String             @db.ObjectId
  cloud     duptimes           @relation(fields: [cloud_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  fields    FilesiddatasFields
  filetype  Boolean
  is_dir    Boolean
  path      String
  size      Int

  @@index([fields.vndb], map: "fields.vndb_1")
  @@index([fields.bgm], map: "fields.bgm_1")
  @@index([fields.steam], map: "fields.steam_1")
  @@index([fields.ymgal], map: "fields.ymgal_1")
}

model vndbdatas {
  id       String              @id @default(auto()) @map("_id") @db.ObjectId
  cloud_id String              @db.ObjectId
  cloud    duptimes            @relation(fields: [cloud_id], references: [id])
  vnid     String              @unique
  alias    String[]
  image    String
  olang    String
  releases VndbdatasReleases[]
  titles   VndbdatasTitles[]
  tags     tags_vndatas[]
}

model tags {
  id           String         @id @default(auto()) @map("_id") @db.ObjectId
  gid          String         @unique
  cloud_id     String         @db.ObjectId
  cloud        duptimes       @relation(fields: [cloud_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  cat          String
  defaultspoil String
  searchable   String
  applicable   String
  name         String
  alias        String
  description  String
  vndbdatas    tags_vndatas[]

  @@index([name], map: "name_1")
  @@index([alias], map: "alias_1")
}

model tags_vndatas {
  id              String    @id @default(auto()) @map("_id") @db.ObjectId
  unid            String    @unique
  tag             String
  uid             String
  vid             String
  average_rating  Float?
  average_spoiler Float?
  lie             String?
  cloud_id        String    @db.ObjectId
  cloud           duptimes  @relation(fields: [cloud_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  vndbdata        vndbdatas @relation(fields: [vid], references: [vnid])
  tags            tags      @relation(fields: [tag], references: [gid])

  @@index([tag], map: "tag_1")
  @@index([vid], map: "vid_1")
}

model users {
  id        String  @id @default(auto()) @map("_id") @db.ObjectId
  name      String  @unique
  email     String  @unique
  password  String
  twoFactor String?
  identity  String
}
